# mokuro-json-gui
-----

# Mokuro JSON GUI

`Mokuro JSON GUI` 是一個獨立、免安裝的 HTML 工具，專為 [mokuro](https://github.com/kha-white/mokuro) 專案的使用者設計。它提供了一個互動式視覺化介面，讓使用者可以方便地載入 `mokuro` 產生的圖片和對應的 JSON 檔案，進行 OCR 結果的校對、編輯、修正與匯出。

這個工具完全在您的瀏覽器本機端運行，所有檔案處理都在本地進行，無需上傳到任何伺服器，確保了您的資料隱私和安全。

  
## 注意：请下载no-angle-v1分支的html，main分支(即angle)仅适用于作者个人魔改的json和mokuro。

## 專案目標

`mokuro` 是一個強大的工具，可以從漫畫圖片中提取文字。然而，OCR 結果有時會出現偏差，例如文字方塊定位不準、文字識別錯誤、或區塊排序混亂等。傳統上，使用者需要手動編輯 JSON 檔案，這個過程不僅繁瑣且容易出錯。

`Mokuro JSON GUI` 旨在解決這個痛點，提供一個「所見即所得」(WYSIWYG) 的編輯環境，讓修正 OCR 結果變得跟操作繪圖軟體一樣直觀簡單。

## 主要功能

本工具基於您提供的 HTML 檔案，具備以下強大功能：

### 檔案處理

  * **批次載入**：一次性選擇包含多張圖片的資料夾和對應的 JSON 資料夾。工具會自動比對檔名並配對。
  * **檔案導航**：方便地在多個已載入的檔案間進行「上一張」/「下一張」切換。
  * **靈活匯出**：
      * **匯出單檔**：僅儲存目前正在編輯的 JSON 檔案。
      * **匯出所有**：將所有已載入並可能已修改的 JSON 檔案打包成一個 ZIP 檔案，一鍵下載。

### 視覺化與顯示

  * **多圖層顯示**：可自由切換「總框」(Block)、「行框」(Line) 和「文字」的顯示/隱藏，讓畫面更清晰。
  * **屬性提示**：當滑鼠懸停或選取區塊時，會顯示區塊索引、字體大小、角度等實用資訊。

### 全局與批次處理

  * **一鍵處理**：自動執行一套預設的優化流程，包括「固定規則取代」、「批次切換數字橫排」和「所有頁面自動字號」。
  * **固定規則取代**：套用預設的符號和文字取代規則（例如 `．．．` -\> `…`，`「` -\> `｢`），快速修正常見的 OCR 錯誤。
  * **數字橫排 (Tate-Chuu-Yoko)**：全局開啟或關閉日文排版中的數字橫排（疊字）功能。
  * **批次自動字號**：為所有已載入頁面的所有區塊，根據其文字行框的大小自動計算並設定最合適的字體大小。

### 強大的編輯工具

  * **新增文字框**：在「拖曳模式」下，可像畫矩形一樣輕鬆新增文字框。
  * **移動與縮放**：
      * **行框 (Line)**：拖曳移動、旋轉，或透過控制點進行八向縮放和邊緣調整。
      * **總框 (Block)**：拖曳旋轉或縮放整個區塊。
  * **自動適應與校正**：
      * **自適應外框**：根據區塊內的所有行框，自動重新計算並調整總框的大小與角度。
      * **矩形化 (Rectify)**：將不規則的四邊形行框校正為標準矩形。
      * **扶正 (Straighten)**：將歪斜的行框拉直，使其與頁面水平/垂直對齊。
  * **結構編輯**：
      * **合併 (Merge)**：選取多個行框（可跨不同區塊），將它們合併成一個新的總框。原區塊中未被選取的行會被保留並自成一體，不會遺失。
      * **拆分 (Split)**：將一個包含多行文字的總框，拆分成數個獨立的區塊。
      * **手動排序 (Reorder)**：進入排序模式，透過點擊區塊來重新定義它們在 JSON 檔案中的順序。
  * **內容與屬性編輯**：
      * **修改文字**：彈出對話框，方便地修改單一行的文字內容。
      * **修改屬性**：快速切換區塊的「橫排/豎排」或「數字橫排」屬性。
      * **修改字號/角度**：手動輸入精確的字體大小或總框旋轉角度。

## 如何使用

本工具是一個單一的 HTML 檔案，無需安裝任何軟體或伺服器。

1.  **下載**：從本 GitHub 儲存庫下載 `index.html` (或您命名的 HTML 檔案)。
2.  **開啟**：直接用您的網頁瀏覽器（推薦使用 Chrome 或 Firefox）開啟這個 HTML 檔案。
3.  **選擇圖片**：點擊左上角的「選擇圖片」按鈕，然後選擇包含您的漫畫/掃描圖片的**資料夾**。
4.  **選擇 JSON**：點擊「選擇 JSON」按鈕，然後選擇包含對應 `mokuro` OCR 結果的**資料夾**。
5.  **開始編輯**：
      * 工具會自動匹配同名的圖片和 JSON 檔案。
      * 使用頂部工具欄的按鈕進行各種編輯操作。
      * 在畫布上直接點擊、拖曳來選取和修改文字框。按住 `Shift` 鍵可多選。
6.  **匯出結果**：完成編輯後，點擊「匯出 JSON」或「匯出所有」來儲存您的工作成果。

## 相依性

本工具使用了以下開源 JavaScript 函式庫，並透過 CDN 載入，無需手動安裝：

  * **Tailwind CSS**：用於美化使用者介面。
  * **JSZip**：用於「匯出所有」功能，將多個 JSON 檔案打包成 ZIP。

-----
